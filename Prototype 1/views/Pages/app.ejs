<!DOCTYPE html>
<html lang="en">
<%- include ('../partials/head') %>
<link rel="stylesheet" href="/app.css">

<body>
    <div class="side-bar">
            <a id="calendarIcon">
                <i class="fa-solid fa-calendar-days icons" style="color: #000000;" name="calendarIcon"></i>
                <span>Calendrier</span>
            </a>
    
            <a id="profileIcon">
                <i class="fa-solid fa-user icons" style="color: #000000;" name="profileIcon"></i>
                <span>Profile</span>
            </a>
            
            <a id="plusIcon"> 
                <i class="fa-sharp fa-solid fa-plus icons" style="color: #000000;" name="plusIcon"></i>
                <span>Entrainements</span>
            </a>
           
            <a href="/" id="exitIcon">
                <i class="fa-solid fa-right-from-bracket icons" style="color: #000000;" name="exitIcon"></i>
                <span>Acceuil</span>
            </a>
        </div>

        <div id="card-container" class="card-container">
            <!-- Les cartes seront ajoutées ici par JavaScript -->
        </div>
    </div>
    <div class="profile-page hidden">
        <style>
            .theme-yellow, .theme-black {
                padding: 10px; /* Augmente l'espace interne */
                margin-bottom: 10px; /* Espacement entre les containers */
            }
            .theme-yellow {
                background-color: #D5C069;
                color: black;
            }
            .theme-black {
                background-color: black;
                color: #D5C069;
            }
            .user-image { 
                max-width: 100%; 
                height: auto; 
                object-fit: cover; /* Ajuste les proportions */
            }
            .row.align-items-stretch {
                display: flex;
                flex-wrap: wrap;
            }
        </style>
        <div class="container mt-4">
            <div class="row align-items-stretch">
                <!-- Colonne pour les informations -->
                <div class="col-md-8">
                    <div class="row mb-2">
                        <div class="col-sm-2 theme-black">Id</div>
                        <div class="col-sm-4 theme-yellow"><%= user._id %></div>
                    </div>
                    <!-- Répétez pour les autres lignes d'informations -->
                    <div class="row mb-2">
                        <div class="col-sm-2 theme-black">Nom</div>
                        <div class="col-sm-4 theme-yellow"><%= user.nom %></div>
                    </div>
                    <div class="row mb-2">
                        <div class="col-sm-2 theme-black">Prenom</div>
                        <div class="col-sm-4 theme-yellow"><%= user.prenom %></div>
                    </div>
                    <div class="row mb-2">
                        <div class="col-sm-2 theme-black">Courriel</div>
                        <div class="col-sm-4 theme-yellow"><%= user.courriel %></div>
                    </div>
                    <div class="row mb-2">
                        <div class="col-sm-2 theme-black">Generations Restantes</div>
                        <div class="col-sm-4 theme-yellow"><%= user.gens %></div>
                    </div>
                    <div class="row mb-2">
                        <div class="col-sm-2 theme-black">Abonnement</div>
                        <div class="col-sm-4 theme-yellow"><%= abonnement.nom_abonnement %></div>
                    </div>
                </div>
                <!-- Colonne pour l'image, placée à la droite des détails -->
                <div class="col-md-4">
                    <img src="imgs/flexingMan.png" alt="Image Utilisateur" class="user-image">
                </div>
            </div>
        </div>
    </div>

    <script>
        // Fonction pour ajouter une carte
        function addCard() {
            // Retirer l'icône '+' de l'ancienne dernière carte, s'il y en a une
            var existingCards = document.querySelectorAll('.card');
            if (existingCards.length > 0) {
                var lastCard = existingCards[existingCards.length - 1];
                lastCard.querySelector('.icons').classList.remove('fa-plus');
            }
    
            // Créer une nouvelle carte avec l'icône '+'
            var newCard = document.createElement('div');
            newCard.className = 'card';
            newCard.innerHTML = '<div class="card-content"><i class="fa-sharp fa-solid fa-plus icons"></i></div>';
            document.getElementById('card-container').appendChild(newCard);
        }
    
        // Ajouter un gestionnaire de clics sur l'icône "+" de la barre latérale
        document.getElementById('add-icon-sidebar').addEventListener('click', function(event) {
            event.preventDefault(); // Empêcher le comportement par défaut du lien
            if (document.querySelectorAll('.card').length === 0) { // Ajouter la première carte seulement si aucune carte n'existe
                addCard();
            }
        });
    
        // Gérer le clic sur les éléments ajoutés dynamiquement en utilisant la délégation
        document.getElementById('card-container').addEventListener('click', function(event) {
            if (event.target.classList.contains('fa-plus')) {
                addCard();
            }
        });
    
        // Fonction pour permettre le défilement horizontal avec la roulette de la souris
        function enableHorizontalScroll(event) {
            // Empêcher le défilement vertical par défaut
            event.preventDefault();
            // Calculer le déplacement horizontal basé sur le delta de la roulette
            var delta = Math.max(-1, Math.min(1, (event.wheelDelta || -event.detail)));
            document.querySelector('.card-container').scrollLeft -= (delta * 40); // Ajustez la valeur 40 si nécessaire
        }
    
        // Appliquer le gestionnaire d'événements sur le conteneur des cartes
        document.querySelector('.card-container').addEventListener('mousewheel', enableHorizontalScroll, false);
        document.querySelector('.card-container').addEventListener('DOMMouseScroll', enableHorizontalScroll, false);
    </script>
    
<script src="https://kit.fontawesome.com/df1a2f4d51.js" crossorigin="anonymous"></script>
<script src="/app.js"></script>
    <%- include('../partials/footer.ejs') %>
</body>
</html>

